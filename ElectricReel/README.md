## 전동 릴 콘트롤러
![alt text](/ElectricReel/image/reel-B.jpg "reel-B")

```
공격적인 물고기 vs 내성적인? 물고기
어떤 줄당기는 패턴이 우리가 잡고자 하는 물고기가 좋아하는 패턴일까?
죽어가는 물고기 패턴일까? 아니면 활기차게 움직이는 물고기 패턴일까?
프로그램을 바꾸면 패턴도 자유롭게 바꿀 수 있으니 우리만의 패턴을 만들어볼까?
```
### 전동릴 콘트롤러 시스템

![alt text](/ElectricReel/image/ReelController-sketch.jpg "reel")

A 버젼 (은성 매트릭스 300) / B 버젼 (시마노 플레이즈 3000)  

의 두 버젼이 있다.  

**Reel-A**  
은성 매트릭스 300은 버튼 2개로 조정 가능한 릴이라 n-ch mosfet으로
open drain 출력을 만들어 전기적으로 스위치를 눌러주는 식으로 콘트롤 하였고
줄이 얼마나 풀리는지 알기위해서는 릴에서 나오는 자기 인코더의 신호를
마이크로 콘트롤러의 입력핀을 통해 받기 위해 직렬저항을 써서 핀을 보호하였다.


**Reel-B**  
시마노 플레이즈 3000의 경우에는 조금씩 줄을 당기는 버튼이 있는데 이 버튼은 low->high 신호를 줘야해서 서로 (릴과 우리의 마이크로콘트롤러)의 회로를 보호하기 위해 p-ch mosfet의 이용한 open-source 출력으로 회로룰 구성하여 콘트롤 하였고 좀더 부드럽게 줄을 당기는 액션을 하기위해 달려있던 엑셀레이터 레버가 가변저항으로 구현된걸 알고 이를 전기적으로 콘트롤 하기위해 12 bit DAC (MCP4921)를 사용하여 콘트롤 하였다.

시마노 플레이즈 3000에 처음 전원이 인가되었을 때 가변저항값을 체크하는데 이때 저항값이 맞지 않으면 릴이 켜지질 않는데 이를 위해서 기본 저항값을 측정하여 2k + 7.5k의 voltage divider를 구성한 후 가운데 지점에 DAC 출력 핀을 연결하였다. 이와 같은 voltage divider + DAC의 구성인 경우 DAC의 source / sink 전류 출력이 충분하여 우리가 원하는 전압값을 출력해줄 수 있는지 체크하여야한다. MCP4921의 출력 전류는 +/- 25 mA로 우리가 원하는 동작을 수행할 수 있다.

#### 발전 가능한 부분
1. 기판용 케이스를 만들어서 소금기 있는 바닷바람에 대비하자.
2. 커넥터를 핀커넥터를 쓰지말고 원형체결형 커넥터를 쓰자. 아무리 잘만들어도 제일 중요한건 커넥터이다.
3. 시마노릴에서 개조된 엑셀레이터 핸들 가변저항의 값을 adc로 읽어 보자.

#### 파일 살펴보기
- board 폴더: eagle로 디자인한 회로 / 보드 / 거버파일
- code 폴더: trinket pro용 아두이노 코드 2가지 버젼
- BOM 폴더: 보드에 올라가는 부품들 정보
- image 폴더: 각종 참조 사진 들

#### 사용된 기술들
[공대형 낚시 편 Wiki 가서 확인!](https://github.com/gradefree-eng/Fishing/wiki/F%ED%95%99%EC%A0%90-%EA%B3%B5%EB%8C%80%ED%98%95-%EB%82%9A%EC%8B%9C%ED%8E%B8-%EC%9C%84%ED%82%A4)
